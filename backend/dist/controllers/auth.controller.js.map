{"version":3,"sources":["../../src/controllers/auth.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport { CreateUserDto } from '@dtos/users.dto';\r\nimport { RequestWithUser } from '@interfaces/auth.interface';\r\nimport { User } from '@interfaces/users.interface';\r\nimport AuthService from '@services/auth.service';\r\n\r\nclass AuthController {\r\n  public authService = new AuthService();\r\n\r\n  public signUp = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const userData: CreateUserDto = req.body;\r\n      const signUpUserData: User = await this.authService.signup(userData);\r\n\r\n      res.status(201).json({ data: signUpUserData, message: 'signup' });\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  public logIn = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const userData: CreateUserDto = req.body;\r\n      const { cookie, findUser } = await this.authService.login(userData);\r\n\r\n      res.setHeader('Set-Cookie', [cookie]);\r\n      res.status(200).json({ data: findUser, message: 'login' });\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  public logOut = async (req: RequestWithUser, res: Response, next: NextFunction) => {\r\n    try {\r\n      const userData: User = req.user;\r\n      const logOutUserData: User = await this.authService.logout(userData);\r\n\r\n      res.setHeader('Set-Cookie', ['Authorization=; Max-age=0']);\r\n      res.status(200).json({ data: logOutUserData, message: 'logout' });\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n}\r\n\r\nexport default AuthController;\r\n"],"names":["AuthService","AuthController","authService","signUp","req","res","next","userData","signUpUserData","error","body","signup","status","json","data","message","logIn","cookie","findUser","login","setHeader","logOut","logOutUserData","user","logout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,OAAOA,iBAAiB,yBAAyB;AAEjD,IAAA,AAAMC,iBAAN,SAAMA;;0BAAAA;SACGC,cAAc,IAAIF;;SAElBG;mBAAS,kBAAA,SAAOC,KAAcC,KAAeC,MAAuB;gBAEjEC,UACAC,gBAGCC;;;;;;;;;;wBAJDF,WAA0BH,IAAIM,IAAI;wBACX;;4BAAM,MAAKR,WAAW,CAACS,MAAM,CAACJ;;;wBAArDC,iBAAuB;wBAE7BH,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMN;4BAAgBO,SAAS;wBAAS;;;;;;wBACxDN;wBACPH,KAAKG;;;;;;;;;;;QAET;wBATuBL,KAAcC,KAAeC;;;;;SAW7CU;mBAAQ,kBAAA,SAAOZ,KAAcC,KAAeC,MAAuB;gBAEhEC,UACuB,MAArBU,QAAQC,UAITT;;;;;;;;;;wBALDF,WAA0BH,IAAIM,IAAI;wBACX;;4BAAM,OAAKR,WAAW,CAACiB,KAAK,CAACZ;;;wBAA7B,OAAA,eAArBU,SAAqB,KAArBA,QAAQC,WAAa,KAAbA;wBAEhBb,IAAIe,SAAS,CAAC;4BAAeH;;wBAC7BZ,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMI;4BAAUH,SAAS;wBAAQ;;;;;;wBACjDN;wBACPH,KAAKG;;;;;;;;;;;QAET;wBAVsBL,KAAcC,KAAeC;;;;;SAY5Ce;mBAAS,kBAAA,SAAOjB,KAAsBC,KAAeC,MAAuB;gBAEzEC,UACAe,gBAICb;;;;;;;;;;wBALDF,WAAiBH,IAAImB,IAAI;wBACF;;4BAAM,OAAKrB,WAAW,CAACsB,MAAM,CAACjB;;;wBAArDe,iBAAuB;wBAE7BjB,IAAIe,SAAS,CAAC;4BAAe;;wBAC7Bf,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMQ;4BAAgBP,SAAS;wBAAS;;;;;;wBACxDN;wBACPH,KAAKG;;;;;;;;;;;QAET;wBAVuBL,KAAsBC,KAAeC;;;;;AAa9D,eAAeL,eAAe"}